{"ast":null,"code":"import _regeneratorRuntime from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _callSuper from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/callSuper.js\";import _inherits from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/inherits.js\";import{Component}from'react';import Cookies from'js-cookie';import Loader from'react-loader-spinner';import ProductCard from'../ProductCard';import'./index.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var apiStatusConstants={initial:'INITIAL',success:'SUCCESS',failure:'FAILURE',inProgress:'IN_PROGRESS'};var PrimeDealsSection=/*#__PURE__*/function(_Component){function PrimeDealsSection(){var _this;_classCallCheck(this,PrimeDealsSection);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_callSuper(this,PrimeDealsSection,[].concat(args));_this.state={primeDeals:[],apiStatus:apiStatusConstants.initial};_this.getPrimeDeals=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var jwtToken,apiUrl,options,response,fetchedData,updatedData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.setState({apiStatus:apiStatusConstants.inProgress});jwtToken=Cookies.get('jwt_token');apiUrl='https://apis.ccbp.in/prime-deals';options={headers:{Authorization:\"Bearer \".concat(jwtToken)},method:'GET'};_context.next=6;return fetch(apiUrl,options);case 6:response=_context.sent;if(!(response.ok===true)){_context.next=13;break;}_context.next=10;return response.json();case 10:fetchedData=_context.sent;updatedData=fetchedData.prime_deals.map(function(product){return{title:product.title,brand:product.brand,price:product.price,id:product.id,imageUrl:product.image_url,rating:product.rating};});_this.setState({primeDeals:updatedData,apiStatus:apiStatusConstants.success});case 13:if(response.status===401){_this.setState({apiStatus:apiStatusConstants.failure});}case 14:case\"end\":return _context.stop();}},_callee);}));_this.renderPrimeDealsListView=function(){var primeDeals=_this.state.primeDeals;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"primedeals-list-heading\",children:\"Exclusive Prime Deals\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"products-list\",children:primeDeals.map(function(product){return/*#__PURE__*/_jsx(ProductCard,{productData:product},product.id);})})]});};_this.renderPrimeDealsFailureView=function(){return/*#__PURE__*/_jsx(\"img\",{src:\"https://assets.ccbp.in/frontend/react-js/exclusive-deals-banner-img.png\",alt:\"register prime\",className:\"register-prime-img\"});};_this.renderLoadingView=function(){return/*#__PURE__*/_jsx(\"div\",{className:\"primedeals-loader-container\",children:/*#__PURE__*/_jsx(Loader,{type:\"ThreeDots\",color:\"#0b69ff\",height:\"50\",width:\"50\"})});};return _this;}_inherits(PrimeDealsSection,_Component);return _createClass(PrimeDealsSection,[{key:\"componentDidMount\",value:function componentDidMount(){this.getPrimeDeals();}},{key:\"render\",value:function render(){var apiStatus=this.state.apiStatus;switch(apiStatus){case apiStatusConstants.success:return this.renderPrimeDealsListView();case apiStatusConstants.failure:return this.renderPrimeDealsFailureView();case apiStatusConstants.inProgress:return this.renderLoadingView();default:return null;}}}]);}(Component);export default PrimeDealsSection;","map":{"version":3,"names":["Component","Cookies","Loader","ProductCard","jsx","_jsx","jsxs","_jsxs","apiStatusConstants","initial","success","failure","inProgress","PrimeDealsSection","_Component","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","state","primeDeals","apiStatus","getPrimeDeals","_asyncToGenerator","_regeneratorRuntime","mark","_callee","jwtToken","apiUrl","options","response","fetchedData","updatedData","wrap","_callee$","_context","prev","next","setState","get","headers","Authorization","method","fetch","sent","ok","json","prime_deals","map","product","title","brand","price","id","imageUrl","image_url","rating","status","stop","renderPrimeDealsListView","children","className","productData","renderPrimeDealsFailureView","src","alt","renderLoadingView","type","color","height","width","_inherits","_createClass","key","value","componentDidMount","render"],"sources":["/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/src/components/PrimeDealsSection/index.js"],"sourcesContent":["import {Component} from 'react'\nimport Cookies from 'js-cookie'\nimport Loader from 'react-loader-spinner'\n\nimport ProductCard from '../ProductCard'\n\nimport './index.css'\n\nconst apiStatusConstants = {\n  initial: 'INITIAL',\n  success: 'SUCCESS',\n  failure: 'FAILURE',\n  inProgress: 'IN_PROGRESS',\n}\n\nclass PrimeDealsSection extends Component {\n  state = {\n    primeDeals: [],\n    apiStatus: apiStatusConstants.initial,\n  }\n\n  componentDidMount() {\n    this.getPrimeDeals()\n  }\n\n  getPrimeDeals = async () => {\n    this.setState({\n      apiStatus: apiStatusConstants.inProgress,\n    })\n\n    const jwtToken = Cookies.get('jwt_token')\n\n    const apiUrl = 'https://apis.ccbp.in/prime-deals'\n    const options = {\n      headers: {\n        Authorization: `Bearer ${jwtToken}`,\n      },\n      method: 'GET',\n    }\n    const response = await fetch(apiUrl, options)\n    if (response.ok === true) {\n      const fetchedData = await response.json()\n      const updatedData = fetchedData.prime_deals.map(product => ({\n        title: product.title,\n        brand: product.brand,\n        price: product.price,\n        id: product.id,\n        imageUrl: product.image_url,\n        rating: product.rating,\n      }))\n      this.setState({\n        primeDeals: updatedData,\n        apiStatus: apiStatusConstants.success,\n      })\n    }\n    if (response.status === 401) {\n      this.setState({\n        apiStatus: apiStatusConstants.failure,\n      })\n    }\n  }\n\n  renderPrimeDealsListView = () => {\n    const {primeDeals} = this.state\n    return (\n      <div>\n        <h1 className=\"primedeals-list-heading\">Exclusive Prime Deals</h1>\n        <ul className=\"products-list\">\n          {primeDeals.map(product => (\n            <ProductCard productData={product} key={product.id} />\n          ))}\n        </ul>\n      </div>\n    )\n  }\n\n  renderPrimeDealsFailureView = () => (\n    <img\n      src=\"https://assets.ccbp.in/frontend/react-js/exclusive-deals-banner-img.png\"\n      alt=\"register prime\"\n      className=\"register-prime-img\"\n    />\n  )\n\n  renderLoadingView = () => (\n    <div className=\"primedeals-loader-container\">\n      <Loader type=\"ThreeDots\" color=\"#0b69ff\" height=\"50\" width=\"50\" />\n    </div>\n  )\n\n  render() {\n    const {apiStatus} = this.state\n    switch (apiStatus) {\n      case apiStatusConstants.success:\n        return this.renderPrimeDealsListView()\n      case apiStatusConstants.failure:\n        return this.renderPrimeDealsFailureView()\n      case apiStatusConstants.inProgress:\n        return this.renderLoadingView()\n      default:\n        return null\n    }\n  }\n}\n\nexport default PrimeDealsSection\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}