{"ast":null,"code":"import _regeneratorRuntime from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _callSuper from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/callSuper.js\";import _inherits from\"/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/node_modules/.pnpm/@babel/runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/inherits.js\";import{Component}from'react';import Cookies from'js-cookie';import{Redirect}from'react-router-dom';import'./index.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=/*#__PURE__*/function(_Component){function LoginForm(){var _this;_classCallCheck(this,LoginForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_callSuper(this,LoginForm,[].concat(args));_this.state={username:'',password:'',showSubmitError:false,errorMsg:''};_this.onChangeUsername=function(event){_this.setState({username:event.target.value});};_this.onChangePassword=function(event){_this.setState({password:event.target.value});};_this.onSubmitSuccess=function(jwtToken){var history=_this.props.history;Cookies.set('jwt_token',jwtToken,{expires:30});history.replace('/');};_this.onSubmitFailure=function(errorMsg){_this.setState({showSubmitError:true,errorMsg:errorMsg});};_this.submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _this$state,username,password,userDetails,url,options,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_this$state=_this.state,username=_this$state.username,password=_this$state.password;userDetails={username:username,password:password};url='https://apis.ccbp.in/login';options={method:'POST',body:JSON.stringify(userDetails)};_context.next=7;return fetch(url,options);case 7:response=_context.sent;_context.next=10;return response.json();case 10:data=_context.sent;if(response.ok===true){_this.onSubmitSuccess(data.jwt_token);}else{_this.onSubmitFailure(data.error_msg);}case 12:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.renderPasswordField=function(){var password=_this.state.password;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",htmlFor:\"password\",children:\"PASSWORD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"password-input-field\",value:password,onChange:_this.onChangePassword,placeholder:\"Password\"})]});};_this.renderUsernameField=function(){var username=_this.state.username;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",htmlFor:\"username\",children:\"USERNAME\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",className:\"username-input-field\",value:username,onChange:_this.onChangeUsername,placeholder:\"Username\"})]});};return _this;}_inherits(LoginForm,_Component);return _createClass(LoginForm,[{key:\"render\",value:function render(){var _this$state2=this.state,showSubmitError=_this$state2.showSubmitError,errorMsg=_this$state2.errorMsg;var jwtToken=Cookies.get('jwt_token');if(jwtToken!==undefined){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://assets.ccbp.in/frontend/react-js/nxt-trendz-logo-img.png\",className:\"login-website-logo-mobile-img\",alt:\"website logo\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://assets.ccbp.in/frontend/react-js/nxt-trendz-login-img.png\",className:\"login-img\",alt:\"website login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-container\",onSubmit:this.submitForm,children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://assets.ccbp.in/frontend/react-js/nxt-trendz-logo-img.png\",className:\"login-website-logo-desktop-img\",alt:\"website logo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:this.renderUsernameField()}),/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:this.renderPasswordField()}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",children:\"Login\"}),showSubmitError&&/*#__PURE__*/_jsxs(\"p\",{className:\"error-message\",children:[\"*\",errorMsg]})]})]});}}]);}(Component);export default LoginForm;","map":{"version":3,"names":["Component","Cookies","Redirect","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LoginForm","_Component","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","state","username","password","showSubmitError","errorMsg","onChangeUsername","event","setState","target","value","onChangePassword","onSubmitSuccess","jwtToken","history","props","set","expires","replace","onSubmitFailure","submitForm","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$state","userDetails","url","options","response","data","wrap","_callee$","_context","prev","next","preventDefault","method","body","JSON","stringify","fetch","sent","json","ok","jwt_token","error_msg","stop","_x","apply","renderPasswordField","children","className","htmlFor","type","id","onChange","placeholder","renderUsernameField","_inherits","_createClass","key","render","_this$state2","get","undefined","to","src","alt","onSubmit"],"sources":["/home/nxtwave/reactjs/coding-practices/enhancementOfNxtTrendzPayment/src/components/LoginForm/index.js"],"sourcesContent":["import {Component} from 'react'\nimport Cookies from 'js-cookie'\nimport {Redirect} from 'react-router-dom'\n\nimport './index.css'\n\nclass LoginForm extends Component {\n  state = {\n    username: '',\n    password: '',\n    showSubmitError: false,\n    errorMsg: '',\n  }\n\n  onChangeUsername = event => {\n    this.setState({username: event.target.value})\n  }\n\n  onChangePassword = event => {\n    this.setState({password: event.target.value})\n  }\n\n  onSubmitSuccess = jwtToken => {\n    const {history} = this.props\n\n    Cookies.set('jwt_token', jwtToken, {\n      expires: 30,\n    })\n    history.replace('/')\n  }\n\n  onSubmitFailure = errorMsg => {\n    this.setState({showSubmitError: true, errorMsg})\n  }\n\n  submitForm = async event => {\n    event.preventDefault()\n    const {username, password} = this.state\n    const userDetails = {username, password}\n    const url = 'https://apis.ccbp.in/login'\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(userDetails),\n    }\n    const response = await fetch(url, options)\n    const data = await response.json()\n    if (response.ok === true) {\n      this.onSubmitSuccess(data.jwt_token)\n    } else {\n      this.onSubmitFailure(data.error_msg)\n    }\n  }\n\n  renderPasswordField = () => {\n    const {password} = this.state\n\n    return (\n      <>\n        <label className=\"input-label\" htmlFor=\"password\">\n          PASSWORD\n        </label>\n        <input\n          type=\"password\"\n          id=\"password\"\n          className=\"password-input-field\"\n          value={password}\n          onChange={this.onChangePassword}\n          placeholder=\"Password\"\n        />\n      </>\n    )\n  }\n\n  renderUsernameField = () => {\n    const {username} = this.state\n\n    return (\n      <>\n        <label className=\"input-label\" htmlFor=\"username\">\n          USERNAME\n        </label>\n        <input\n          type=\"text\"\n          id=\"username\"\n          className=\"username-input-field\"\n          value={username}\n          onChange={this.onChangeUsername}\n          placeholder=\"Username\"\n        />\n      </>\n    )\n  }\n\n  render() {\n    const {showSubmitError, errorMsg} = this.state\n    const jwtToken = Cookies.get('jwt_token')\n\n    if (jwtToken !== undefined) {\n      return <Redirect to=\"/\" />\n    }\n\n    return (\n      <div className=\"login-form-container\">\n        <img\n          src=\"https://assets.ccbp.in/frontend/react-js/nxt-trendz-logo-img.png\"\n          className=\"login-website-logo-mobile-img\"\n          alt=\"website logo\"\n        />\n        <img\n          src=\"https://assets.ccbp.in/frontend/react-js/nxt-trendz-login-img.png\"\n          className=\"login-img\"\n          alt=\"website login\"\n        />\n        <form className=\"form-container\" onSubmit={this.submitForm}>\n          <img\n            src=\"https://assets.ccbp.in/frontend/react-js/nxt-trendz-logo-img.png\"\n            className=\"login-website-logo-desktop-img\"\n            alt=\"website logo\"\n          />\n          <div className=\"input-container\">{this.renderUsernameField()}</div>\n          <div className=\"input-container\">{this.renderPasswordField()}</div>\n          <button type=\"submit\" className=\"login-button\">\n            Login\n          </button>\n          {showSubmitError && <p className=\"error-message\">*{errorMsg}</p>}\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default LoginForm\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}